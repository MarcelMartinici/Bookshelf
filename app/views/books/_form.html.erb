<%= form_for @book do |f| %>
  <% if @book.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@book.errors.count, "error") %> prohibited this books from being saved:</h2>
        <ul>
          <% if @book.errors.any? %>
            <div id="error_expl" class="panel panel-danger">
              <div class="panel-heading">
                <h3 class="panel-title"><%= pluralize(@book.errors.count, "error") %> prohibited this book from being saved:</h3>
              </div>
              <div class="panel-body">
                <ul>
                  <% @book.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                  <% end %>
                </ul>
              </div>
            </div>
          <% end %>
        </ul>
    </div>
  <% end %>

  <p>
    <%= f.label :title%><br>
    <div class="controls">
      <%= f.text_field :title, :class => 'form-control'  %>
    </div>
  </p>

  <p>
    <%= f.label :author %><br>
      <div class="controls">
        <%= text_field_tag 'book[author]', @book.author.try(:name) , :class =>'form-control' %>
      </div>
  </p>

  <p>
    <%= f.label :description%><br>
    <div class="controls">
      <%= f.text_area :description , :class =>'form-control'%>
    </div>
  </p>

  <p>
    <%= label_tag 'Cathegory' %><br>
    <div class="controls">
    <%= text_field_tag 'book[cathegory]', @book.cathegory.map { |cathegory| cathegory.cathegory_name }.join(', '), :class =>'form-control' %>
  </p>

  <p>
    <%= f.label :year%><br>
    <%= f.number_field :year %>
  </p>

  <p>
    <%= f.file_field :cover, :class => 'btn btn-info' %>
  </p>

  <p>
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),books_path, :class => 'btn btn-default' %>
  </p>
<% end %>