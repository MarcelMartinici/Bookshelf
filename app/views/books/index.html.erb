<h1>Listing Books</h1>
<% if can? :create, @book %>
  <%= link_to 'New book', new_book_path %>
<%end%>
<br>
<table>
  <tr>
    <th>Title</th>
    <th>Author</th>
    <th>Description</th>
    <th>Year</th>
  </tr>
 
  <% @book.each do |book| %>
    <tr>
      <td><%= book.title %></td>
      <td><%= book.author.try(:name) %></td>
      <td><%= book.description %></td>
      <td><%= book.year %></td>
      <td><%= link_to 'Show', book_path(book) %></td>
      <% if can? :update, @book %>
        <td><%= link_to 'Edit',edit_book_path(book) %></td>
      <%end%>
      <% if can? :destroy, @book %>
        <td><%= link_to 'Delete', book_path(book), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <%end%>
    </tr>
  <% end %>
</table>